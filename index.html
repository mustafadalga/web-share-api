<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Share API</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>

<body>
    <div class="container">
        <form>
            <div class="form-group">
                <label>Title</label>
                <input type="text" class="form-control" id="title" value="Default Title">
            </div>
            <div class="form-group">
                <label>Message</label>
                <input type="text" class="form-control" id="message" value="Default Message">
            </div>
            <div class="form-group">
                <label>Url</label>
                <input type="text" class="form-control" id="url" value="https://example.com">
            </div>
            <div class="form-group">
                <label>File</label>
                <input id="file" type="file">
            </div>
            <div class="form-group">
                <button onclick="share()" type="button">Share</button>
            </div>
        </form>
    </div>


</body>

</html>

<script>
    function share() {
        let data = getFormData()
        if (isSupportShareFile(data.file)) {
            navigator.share(data)
                .then(() => console.log('Successful share'))
                .catch((error) => console.log('Error sharing', error));
        } else if (navigator.share) {
            delete data["file"]
            navigator.share(data)
                .then(() => console.log('Successful share'))
                .catch((error) => console.log('Error sharing', error));
        }

    }


    function getFormData() {
        const title = document.querySelector("#title").value;
        const message = document.querySelector("#message").value;
        const url = document.querySelector("#url").value;
        const file = document.querySelector("#file").files
        return {
            title: title,
            message: message,
            url: url,
            file: file
        }
    }

    function isSupportShareFile(file) {
        return navigator.canShare && navigator.canShare({
            files: file
        })
    }
</script>